<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>Login Page with Background Image Example</title>
  <link rel="stylesheet" href="./style/login.css">

</head>
<body>
<!-- partial:index.partial.html -->
<div id="bg"></div>

<form>
  <div class="form-field">
    <input name="username" type="text" placeholder="Usuario" required/>
  </div>
  
  <div class="form-field">
    <input name="password" type="password" placeholder="ContraseÃ±a" required/>                         </div>
  
  <div class="form-field">
    <button class="btn" type="submit">Log in</button>
  </div>
</form>
<!-- partial -->
  <script>
     const btnLogin = document.querySelector('.btn');
    const form = document.querySelector('form');

    btnLogin.addEventListener('click',async (event)=>{
      event.preventDefault();
      const username = form.username.value;
      const password = form.password.value;
      const res = await fetch('/login', {
        method: 'POST',
        body: JSON.stringify({username,password}),
        headers: {'Content-Type': 'application/json'}
      });

      const data = await res.json();
      if(data.error==null){
        location.assign('/');
      }
    });
  </script>
</body>
</html>
